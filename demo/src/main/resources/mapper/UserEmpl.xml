<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="com.example.demo.mapper.UserEmplMapper">

	<select id="userEmplSelect" resultType="com.example.demo.model.UserEmpl">
		select  companyname,
			    companypostno,
			    companyaddr,
			    companyempregion,
			    detailwork,
			    employmentperiod,
			    employmentkind,
			    workingtime1,
			    resttime1,
			    workingtime2,
			    resttime2,
			    workingtime3,
			    resttime3,
			    worktimememo,
			    workday,
			    restday,
			    otherworktime,
			    restwork,
			    vacation,
			    salary,
			    overtimepay,
			    skillpay,
			    technicalpay,
				workallowancepay,
			    specialpay,
			    commutepay,
			    housingpay,
			    privatehousingexpenses,
			    salrymemo,
			    payterms,
			    healthyexpenses,
			    kouseiexpenses,
			    employmentexpenses,
			    employmentbusyo,
			    employmentph,
			    etc
		  from EngageEmployment
		 where 1=1
		   and userid = #{userid}
		   and year_month = #{year_month}
	</select>
	

    <insert id="userEmplInsert" parameterType="com.example.demo.model.UserEmpl">
	     INSERT INTO EngageEmployment 
	     (
	     	userid,
	     	year_month,
	     	companyname,
		    companypostno,
		    companyaddr,
		    companyempregion,
		    detailwork,
		    employmentperiod,
		    employmentkind,
		    workingtime1,
		    resttime1,
		    workingtime2,
		    resttime2,
		    workingtime3,
		    resttime3,
		    worktimememo,
		    workday,
		    restday,
		    otherworktime,
		    restwork,
		    vacation,
		    salary,
		    overtimepay,
		    skillpay,
		    technicalpay,
			workallowancepay,
		    specialpay,
		    commutepay,
		    housingpay,
		    privatehousingexpenses,
		    salrymemo,
		    payterms,
		    healthyexpenses,
		    kouseiexpenses,
		    employmentexpenses,
		    employmentbusyo,
		    employmentph,
		    etc
	     )
	     VALUES 
	     (	
	     	#{userid},
	     	#{year_month},
	     	#{companyname},
		    #{companypostno},
		    #{companyaddr},
		    #{companyempregion},
		    #{detailwork},
		    #{employmentperiod},
		    #{employmentkind},
		    #{workingtime1},
		    #{resttime1},
		    #{workingtime2},
		    #{resttime2},
		    #{workingtime3},
		    #{resttime3},
		    #{worktimememo},
		    #{workday},
		    #{restday},
		    #{otherworktime},
		    #{restwork},
		    #{vacation},
		    #{salary},
		    #{overtimepay},
		    #{skillpay},
		    #{technicalpay},
			#{workallowancepay},
		    #{specialpay},
		    #{commutepay},
		    #{housingpay},
		    #{privatehousingexpenses},
		    #{salrymemo},
		    #{payterms},
		    #{healthyexpenses},
		    #{kouseiexpenses},
		    #{employmentexpenses},
		    #{employmentbusyo},
		    #{employmentph},
		    #{etc}
	     )
	     ON CONFLICT (userid, year_month) DO UPDATE SET 
		    companyname = EXCLUDED.companyname,
		    companypostno = EXCLUDED.companypostno,
		    companyaddr = EXCLUDED.companyaddr,
		    companyempregion = EXCLUDED.companyempregion,
		    detailwork = EXCLUDED.detailwork,
		    employmentperiod = EXCLUDED.employmentperiod,
		    employmentkind = EXCLUDED.employmentkind,
		    workingtime1 = EXCLUDED.workingtime1,
		    resttime1 = EXCLUDED.resttime1,
		    workingtime2 = EXCLUDED.workingtime2,
		    resttime2 = EXCLUDED.resttime2,
		    workingtime3 = EXCLUDED.workingtime3,
		    resttime3 = EXCLUDED.resttime3,
		    worktimememo = EXCLUDED.worktimememo,
		    workday = EXCLUDED.workday,
		    restday = EXCLUDED.restday,
		    otherworktime = EXCLUDED.otherworktime,
		    restwork = EXCLUDED.restwork,
		    vacation = EXCLUDED.vacation,
		    salary = EXCLUDED.salary,
		    overtimepay = EXCLUDED.overtimepay,
		    skillpay = EXCLUDED.skillpay,
		    technicalpay = EXCLUDED.technicalpay,
			workallowancepay = EXCLUDED.workallowancepay,
		    specialpay = EXCLUDED.specialpay,
		    commutepay = EXCLUDED.commutepay,
		    housingpay = EXCLUDED.housingpay,
		    privatehousingexpenses = EXCLUDED.privatehousingexpenses,
		    salrymemo = EXCLUDED.salrymemo,
		    payterms = EXCLUDED.payterms,
		    healthyexpenses = EXCLUDED.healthyexpenses,
		    kouseiexpenses = EXCLUDED.kouseiexpenses,
		    employmentexpenses = EXCLUDED.employmentexpenses,
		    employmentbusyo = EXCLUDED.employmentbusyo,
		    employmentph = EXCLUDED.employmentph,
		    etc = EXCLUDED.etc
	</insert>
</mapper>